<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>CSE 110 Maze Runner</title>
	  
		<!-- all css links here -->
		<link type="text/css" rel="stylesheet" href="css/maze_runner.css" />
		
		<!-- All Scripts Here -->
		<script type="text/javascript" src="js/Game.js"></script>
		<script src="../Blockly/blockly_compressed.js"></script>
		<script src="../Blockly/javascript_compressed.js"></script>
		<script src="../Blockly/blocks_compressed.js"></script>
		<script src="../Blockly/blocks/testBlockJSON.js"></script>
		<script src="../Blockly/generators/javascript/testblockgen.js"></script>
		<script src="../Blockly/msg/js/en.js"></script>
		<!--<script src="C:/Users/Philip/JSInter/interpreter.js"></script>
		<script src="C:/Users/Philip/JSInter/acorn.js"></script>-->

	</head>
	<body onload="CallGUI();" onkeydown="changePosition(event)">
		<header>
			<h1>Maze Runner</h1>
		</header>
		
		<div id="mr-scores">
			<ul>
				<li><strong>High Score: </strong><span id="mr-highScore">0</span></li>
				<li><strong>Game Score: </strong><span id="mr-gameScore">0</span></li>
				<li><strong>Level Score: </strong><span id="mr-levelScore">0</span></li>
				<li><strong>Level: </strong><span id="mr-levelNumber">1</span></li>
			</ul>
		</div>
		
		
		<div id="mr-game-container">
			<div id="mr-gameArea">
				<div id="GameArea"> </div>
			</div>
			<div id="mr-controls">
				<strong>While battery not found.. do:</strong>
				<div id="blocklyDiv" style="height: 500px; width: 100%;"></div>
			</div>
		</div>
	
	
		<nav id="mr-navigation">
			<ul>
				<li><a href="#" class="mr-button" id="mr-playPause"  onclick="myFunction()">Play / Pause</a></li>
				<li><a href="#" class="mr-button" id="mr-step">Step</a></li>
				<li><a href="#" class="mr-link" id="mr-help">help</a></li>
				<li><a href="#" class="mr-button" id="mr-resetLevel">Reset Level</a></li>
				<li><a href="#" class="mr-button" id="mr-resetGame">Reset Game</a></li>
			</ul>
		</nav>
	
	
	  <!-- blockly code -->
	  <xml id="toolbox" style="display: none">
        <category name="Logic">
	      <block type="check_right"></block>
	      <block type="check_left"></block>
	      <block type="check_front"></block>
	      <block type="check_back"></block>
	      <block type="outer_if"></block>
        </category>
        <category name="Statements">
          <block type="back_statement"></block>
	      <block type="forward_statement"></block>
	      <block type="left_statement"></block>
	      <block type="right_statement"></block>
        </category>
        <xml id="workspaceBlocks" style="display:none">
          <variables></variables>
          <block type="start_here" id="I:(at^IFXz[N(4viLOXj" x="10" y="10" disabled="true"></block>
        </xml>
      </xml>
      <script>
	    var toolbox = document.getElementById("toolbox");

        var options = {
	      toolbox : toolbox,
	      collapse : true,
	      comments : true,
	      disable : true,
	      maxBlocks : Infinity,
	      trashcan : true,
	      horizontalLayout : false,
	      toolboxPosition : 'start',
	      css : true,
	      media : 'https://blockly-demo.appspot.com/static/media/',
	      rtl : false,
	      scrollbars : true,
	      sounds : true,
	      oneBasedIndex : true,
	      grid : {
		    spacing : 20,
		    length : 1,
		    colour : '#888',
		    snap : true
	       }
        };

        /* Inject your workspace */
        var demoWorkspace = Blockly.inject('blocklyDiv', options);

        /* Load Workspace Blocks from XML to workspace. Remove all code below if no blocks to load */

        /* TODO: Change workspace blocks XML ID if necessary. Can export workspace blocks XML from Workspace Factory. */
        var workspaceBlocks = document.getElementById("workspaceBlocks");

        /* Load blocks to workspace. */
        Blockly.Xml.domToWorkspace(demoWorkspace, workspaceBlocks);

	    function myUpdateFunction(event)
	    {
		  var code1 = Blockly.JavaScript.workspaceToCode(demoWorkspace);
		  document.getElementById('printer').value = code1;
	    }

	    function myFunction()
	    {
		  var code = Blockly.JavaScript.workspaceToCode(demoWorkspace);
		  document.getElementById('printer').value = code;

		  try {
		  eval(code);
		  } catch (e) {
		  alert(e);
		  }
	    }
	    demoWorkspace.addChangeListener(myUpdateFunction);
      </script>
	  <textarea id="printer"></textarea>
  </body>
</html>
